from threading import Thread
import sys

if len(sys.argv) < 3:
    print("Usage: python3 procexploit_network.py i_start i_end n_threads")
    sys.exit(1)

def do_exploit(i):
    fib = [0, 1]
    for i in range(2, 25000):
        fib.append(fib[i-1] + fib[i-2])
    print("Fibonacci", i, "done at", sys.argv[1])

i_start = int(sys.argv[1])
i_end = int(sys.argv[2])
n_threads = int(sys.argv[3])

threads = []
for i in range(i_start, i_end):
    t = Thread(target=do_exploit, args=(i,))
    t.start()
    threads.append(t)

for t in threads:
    t.join()