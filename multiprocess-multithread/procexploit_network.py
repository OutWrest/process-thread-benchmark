import requests
from threading import Thread
import sys

if len(sys.argv) < 3:
    print("Usage: python3 procexploit_network.py i_start i_end n_threads")
    sys.exit(1)

def do_exploit(i):
    url = "http://127.0.0.1:9000/exploit/" + str(i)

    response = requests.get(url)

    print(response.text)

i_start = int(sys.argv[1])
i_end = int(sys.argv[2])
n_threads = int(sys.argv[3])

threads = []
for i in range(i_start, i_end):
    t = Thread(target=do_exploit, args=(i,))
    t.start()
    threads.append(t)

for t in threads:
    t.join()
